



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
        <meta name="author" content="jackeyt">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>VS Code搭建ARM Linux Makefile工程IDE（C/C++）[史上最详细] - jackeyt wiki</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.0284f74d.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#vs-codearm-linux-makefileidecc" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="jackeyt wiki" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              jackeyt wiki
            </span>
            <span class="md-header-nav__topic">
              
                VS Code搭建ARM Linux Makefile工程IDE（C/C++）[史上最详细]
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="jackeyt wiki" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    jackeyt wiki
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="介绍" class="md-nav__link">
      介绍
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      ARM_Linux驱动入门
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        ARM_Linux驱动入门
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../驱动第一天---驱动基础/" title="驱动第一天" class="md-nav__link">
      驱动第一天
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../驱动第二天---中断/" title="驱动第二天" class="md-nav__link">
      驱动第二天
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../驱动第三天---总线/" title="驱动第三天" class="md-nav__link">
      驱动第三天
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../三种总线的横向对比表/" title="总线的横向对比表" class="md-nav__link">
      总线的横向对比表
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ARMLinux设备树/" title="驱动第四天" class="md-nav__link">
      驱动第四天
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../手把手教你从单片机移植驱动到ARMLinux上/" title="驱动第五天" class="md-nav__link">
      驱动第五天
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      ARM_Linux应用开发
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        ARM_Linux应用开发
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../VSCode搭建ARMLinuxMakefile工程IDE/" title="0.IDE环境搭建" class="md-nav__link">
      0.IDE环境搭建
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      ARM_Linux内核开发
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        ARM_Linux内核开发
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../VSCode搭建LinuxKernel单步调试IDE环境/" title="0.IDE环境搭建[纯WIN]" class="md-nav__link">
      0.IDE环境搭建[纯WIN]
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Ubuntu+VSCode搭建LinuxKernel单步调试IDE环境/" title="1.IDE环境搭建[纯Ubuntu]" class="md-nav__link">
      1.IDE环境搭建[纯Ubuntu]
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      栗子派LeeZ—RK3399试玩
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        栗子派LeeZ—RK3399试玩
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../LeezPi-RK3399_开箱/" title="0.开箱" class="md-nav__link">
      0.开箱
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../LeezPi-RK3399_SDK使用/" title="1.SDK使用说明" class="md-nav__link">
      1.SDK使用说明
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../LeezPi-RK3399_Android9编译说明/" title="2.Android9编译说明" class="md-nav__link">
      2.Android9编译说明
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      RK1808S_AI计算棒试玩
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        RK1808S_AI计算棒试玩
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../RK1808S_AI计算棒—0.开箱/" title="0.开箱" class="md-nav__link">
      0.开箱
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RK1808S_AI计算棒—1.搭建Windows开发环境/" title="1.开发环境搭建" class="md-nav__link">
      1.开发环境搭建
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RK1808S_AI计算棒—2.RK1808被动模式下mobilenet_v1模型测试/" title="2.被动模式下mobilenet_v1模型测试" class="md-nav__link">
      2.被动模式下mobilenet_v1模型测试
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      HarmonyOS 开发板使用连载
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        HarmonyOS 开发板使用连载
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../HarmonyOS开发板使用连载—0.开箱/" title="0.开箱" class="md-nav__link">
      0.开箱
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../HarmonyOS开发板使用连载—1.纯WIN10下开发环境搭建/" title="1.开发环境搭建" class="md-nav__link">
      1.开发环境搭建
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#0" title="0.环境介绍" class="md-nav__link">
    0.环境介绍
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1cc-makefile" title="1.简单的C/C++ Makefile工程" class="md-nav__link">
    1.简单的C/C++ Makefile工程
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" title="1.1 整体工程预览" class="md-nav__link">
    1.1 整体工程预览
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-addc" title="1.2 add.c" class="md-nav__link">
    1.2 add.c
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-subc" title="1.3  sub.c" class="md-nav__link">
    1.3  sub.c
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-testh" title="1.4  test.h" class="md-nav__link">
    1.4  test.h
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-makefile" title="1.5  makefile" class="md-nav__link">
    1.5  makefile
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-vs-code" title="2. VS Code开发环境搭建" class="md-nav__link">
    2. VS Code开发环境搭建
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-vs-code" title="2.1  VS Code导入工程" class="md-nav__link">
    2.1  VS Code导入工程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-vs-code" title="2.2  VS Code自定义生成编译任务" class="md-nav__link">
    2.2  VS Code自定义生成编译任务
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-tasksjson" title="2.2.1 至简的tasks.json参考" class="md-nav__link">
    2.2.1 至简的tasks.json参考
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-tasksjson" title="2.2.2 添加出错信息的tasks.json参考" class="md-nav__link">
    2.2.2 添加出错信息的tasks.json参考
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-vs-code_1" title="2.2  VS Code自定义生成调试任务" class="md-nav__link">
    2.2  VS Code自定义生成调试任务
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-launchjson" title="2.2.1 生成的launch.json" class="md-nav__link">
    2.2.1 生成的launch.json
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-launchjson" title="2.2.2 launch.json重要项修改添加" class="md-nav__link">
    2.2.2 launch.json重要项修改添加
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223-launchjson" title="2.2.3 launch.json参考" class="md-nav__link">
    2.2.3 launch.json参考
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" title="3. 编译&amp;调试" class="md-nav__link">
    3. 编译&amp;调试
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3-1" title="3. 1 调试前的准备" class="md-nav__link">
    3. 1 调试前的准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" title="3.2 开始调试" class="md-nav__link">
    3.2 开始调试
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" title="4. 演示效果" class="md-nav__link">
    4. 演示效果
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="vs-codearm-linux-makefileidecc">VS Code搭建ARM Linux Makefile工程IDE（C/C++）[史上最详细]</h1>
<div class="toc">
<ul>
<li><a href="#vs-codearm-linux-makefileidecc">VS Code搭建ARM Linux Makefile工程IDE（C/C++）[史上最详细]</a><ul>
<li><a href="#0">0.环境介绍</a></li>
<li><a href="#1cc-makefile">1.简单的C/C++ Makefile工程</a><ul>
<li><a href="#11">1.1 整体工程预览</a></li>
<li><a href="#12-addc">1.2 add.c</a></li>
<li><a href="#13-subc">1.3  sub.c</a></li>
<li><a href="#14-testh">1.4  test.h</a></li>
<li><a href="#15-makefile">1.5  makefile</a></li>
</ul>
</li>
<li><a href="#2-vs-code">2. VS Code开发环境搭建</a><ul>
<li><a href="#21-vs-code">2.1  VS Code导入工程</a></li>
<li><a href="#22-vs-code">2.2  VS Code自定义生成编译任务</a><ul>
<li><a href="#221-tasksjson">2.2.1 至简的tasks.json参考</a></li>
<li><a href="#222-tasksjson">2.2.2 添加出错信息的tasks.json参考</a></li>
</ul>
</li>
<li><a href="#22-vs-code_1">2.2  VS Code自定义生成调试任务</a><ul>
<li><a href="#221-launchjson">2.2.1 生成的launch.json</a></li>
<li><a href="#222-launchjson">2.2.2 launch.json重要项修改添加</a></li>
<li><a href="#223-launchjson">2.2.3 launch.json参考</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#3">3. 编译&amp;调试</a><ul>
<li><a href="#3-1">3. 1 调试前的准备</a></li>
<li><a href="#32">3.2 开始调试</a></li>
</ul>
</li>
<li><a href="#4">4. 演示效果</a></li>
</ul>
</li>
</ul>
</div>
<h2 id="0">0.环境介绍</h2>
<blockquote>
<p>主机：ubuntu 18.04(LTS)
开发板主控：RK3399(ARM 64bit)
或者其他任意一款只有对应的工具链即可
OS:Linux version 4.4.143
开发板IP：192.168.19.171
编译器：aarch64-linux-gnu-gcc (gcc version 7.3.0)
调试器：主机：aarch64-linux-gnu-gdb (gcc version 7.3.0)    开发板：gdbserver(7.3.0)
VS Code版本
    版本 1.23.1
    提交 d0182c3417d225529c6d5ad24b7572815d0de9ac
    日期 2018-05-10T16:04:33.747Z
    Shell 1.7.12
    渲染器 58.0.3029.110
    Node 7.9.0
    架构 x64
VS Code插件：C/C++ （在扩展里面添加即可）</p>
</blockquote>
<h2 id="1cc-makefile">1.简单的C/C++ Makefile工程</h2>
<h3 id="11">1.1 整体工程预览</h3>
<pre><code>.
├── add.c
├── makefile
├── sub.c
└── test.h
</code></pre>

<h3 id="12-addc">1.2 add.c</h3>
<pre><code>#include &quot;test.h&quot;
#include &lt;stdio.h&gt;

int add(int a, int b)
{
    return a + b;
}

int main()
{
    printf(&quot; 2 + 3 = %d\n&quot;, add(2, 3));
    printf(&quot; 2 - 3 = %d\n&quot;, sub(2, 3));
    return 1;
}

</code></pre>

<h3 id="13-subc">1.3  sub.c</h3>
<pre><code>#include &quot;test.h&quot;

int sub(int a, int b)
{
    return a - b;
}
</code></pre>

<h3 id="14-testh">1.4  test.h</h3>
<pre><code>#ifndef _TEST_H
#define _TEST_H

int add(int a, int b);
int sub(int a, int b);
#endif

</code></pre>

<h3 id="15-makefile">1.5  makefile</h3>
<pre><code>#板子对应的交叉链，可以换成其他对应的版本即可
CC=aarch64-linux-gnu-gcc

test: add.o sub.o
    $(CC) -o test add.o sub.o

add.o: add.c test.h
    $(CC) -c add.c

sub.o: sub.c test.h
    $(CC) -c sub.c    

clean:
    rm -rf test
    rm -rf *.o

</code></pre>

<h2 id="2-vs-code">2. VS Code开发环境搭建</h2>
<p>VS Code的灵活性在于可以完全自定义搭建一个适合自己用的开发环境，其中包括可以自定义编译任务，调试任务。</p>
<h3 id="21-vs-code">2.1  VS Code导入工程</h3>
<p>直接打开VS Code，再选择“打开文件夹”，打开对应工程的文件夹即可</p>
<h3 id="22-vs-code">2.2  VS Code自定义生成编译任务</h3>
<p>如上面提到，VS Code的灵活性在于自定义编译任务，而VS Code中用于描述编译任务的定义为：<code>tasks.json</code>，所以自定义编译任务就是编写<code>tasks.json</code>。首先，编写<code>tasks.json</code>有以下两种方法：
1. 在View下打开命令面板(Command Pallette)（快捷键<code>Ctrl+Shift+p</code>），搜索Task，选择Tasks:Configure Task，之后选择Others，生成tasks.json文件。
2. 在菜单栏上面，选择任务(T)--&gt;配置任务(C)...--&gt;使用模板创建tasks.json--&gt;Others，生成tasks.json文件。
<img alt="" src="../images/gif5新文件.gif" /></p>
<h4 id="221-tasksjson">2.2.1 至简的<code>tasks.json</code>参考</h4>
<pre><code>{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    &quot;version&quot;: &quot;2.0.0&quot;,
    &quot;tasks&quot;: [
        {
           &quot;label&quot;: &quot;shell&quot;,//任务名称，和launch.json中一致，即执行这个任务
            &quot;type&quot;: &quot;shell&quot;,//任务类型，即执行该任务的类型，填shell表示在命令行中执行的任务
            &quot;command&quot;: &quot;make&quot;,//执行命令是make，即调用makefile进行编译若直接使用gcc命令行，替换即可
            &quot;problemMatcher&quot;: [
                &quot;$gcc&quot;
            ],
            &quot;group&quot;: {
                &quot;kind&quot;: &quot;build&quot;,
                &quot;isDefault&quot;: true
            }
        }
    ]
}

</code></pre>

<h4 id="222-tasksjson">2.2.2 添加出错信息的<code>tasks.json</code>参考</h4>
<pre><code>{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    &quot;version&quot;: &quot;2.0.0&quot;,
    &quot;tasks&quot;: [
        {
            &quot;label&quot;: &quot;shell&quot;,
            &quot;type&quot;: &quot;shell&quot;,
            &quot;command&quot;: &quot;make&quot;,
                //这个字段是发生错误时，信息的匹配
            &quot;problemMatcher&quot;: {
                &quot;owner&quot;: &quot;cpp&quot;,
                &quot;fileLocation&quot;: [
                    &quot;relative&quot;,
                    &quot;${workspaceFolder}&quot;
                ],
                &quot;pattern&quot;: [
                    {
                        &quot;regexp&quot;: &quot;^([^\\s].*)$&quot;,
                        &quot;file&quot;: 1
                    },
                    {
                        &quot;regexp&quot;: &quot;^\\s+(\\d+):(\\d+)\\s+(error|warning|info)\\s+(.*)\\s\\s+(.*)$&quot;,
                        &quot;line&quot;: 1,
                        &quot;column&quot;: 2,
                        &quot;severity&quot;: 3,
                        &quot;message&quot;: 4,
                        &quot;code&quot;: 5,
                        &quot;loop&quot;: true
                    }
                ]
            },
            &quot;group&quot;: {
                &quot;kind&quot;: &quot;build&quot;,
                &quot;isDefault&quot;: true
            }
        }
    ]
}
</code></pre>

<h3 id="22-vs-code_1">2.2  VS Code自定义生成调试任务</h3>
<p>如上面提到，VS Code的灵活性在于自定义调试任务，而VS Code中用于描述调试任务的定义为：<code>launch.json</code>，所以自定义编译任务就是编写<code>launch.json</code>。首先，编写<code>launch.json</code>可以参考以下方法：</p>
<p>在菜单栏上面，选择调试(D)--&gt;打开配置(C)...--&gt;C++(GDB/LLDB)，生成<code>launch.json</code>文件。</p>
<h4 id="221-launchjson">2.2.1 生成的<code>launch.json</code></h4>
<p>系统自动生成的模块如下：</p>
<pre><code>{
    // 使用 IntelliSense 了解相关属性。 
    // 悬停以查看现有属性的描述。
    // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
        {
            &quot;name&quot;: &quot;(gdb) Launch&quot;,
            &quot;type&quot;: &quot;cppdbg&quot;,
            &quot;request&quot;: &quot;launch&quot;,
            &quot;program&quot;: &quot;enter program name, for example ${workspaceFolder}/a.out&quot;,
            &quot;args&quot;: [],
            &quot;stopAtEntry&quot;: false,
            &quot;cwd&quot;: &quot;${workspaceFolder}&quot;,
            &quot;environment&quot;: [],
            &quot;externalConsole&quot;: true,
            &quot;MIMode&quot;: &quot;gdb&quot;,
            &quot;setupCommands&quot;: [
                {
                    &quot;description&quot;: &quot;Enable pretty-printing for gdb&quot;,
                    &quot;text&quot;: &quot;-enable-pretty-printing&quot;,
                    &quot;ignoreFailures&quot;: true
                }
            ]
        }
    ]
}

</code></pre>

<h4 id="222-launchjson">2.2.2 <code>launch.json</code>重要项修改添加</h4>
<p>可以看到VS Code帮我们生成的文件里面已经完成大部分工作，只需添加修改相应的必要项即可：</p>
<ol>
<li>修改可执行文件的位置： <code>"program": "enter program name, for example ${workspaceFolder}/a.out",</code>修改成我们make编译完成的二进制文件，如本次示例中的  <code>"program": "${workspaceFolder}/test",</code></li>
<li>修改所用gdb调试器所在的位置，添加选项：<code>"miDebuggerPath":"/usr/bin/aarch64-linux-gnu-gdb",</code>  建议最好使用绝对路径，如本例所示</li>
<li>修改目标开发板的IP和端口，添加选项：<code>"miDebuggerServerAddress": "192.168.19.171:10000",</code>如本例所示</li>
<li>其他修改：<code>"preLaunchTask":"shell",</code> 与之前tasks.json中的任务名称要一致，表示在调试前执行的前置任务，当然，除了执行make，还可以执行其他系统命令，如将编译生成文件复制到目标开发板上等等。。。</li>
</ol>
<h4 id="223-launchjson">2.2.3 <code>launch.json</code>参考</h4>
<pre><code>{
    // 使用 IntelliSense 了解相关属性。 
    // 悬停以查看现有属性的描述。
    // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [

        {
            &quot;name&quot;: &quot;(gdb) Launch&quot;,
            &quot;type&quot;: &quot;cppdbg&quot;,
            &quot;request&quot;: &quot;launch&quot;,
            &quot;program&quot;: &quot;${workspaceFolder}/test&quot;,
            &quot;args&quot;: [],
            &quot;stopAtEntry&quot;: true,
            &quot;cwd&quot;: &quot;${workspaceFolder}&quot;,
            &quot;environment&quot;: [],
            &quot;externalConsole&quot;: true,
            &quot;MIMode&quot;: &quot;gdb&quot;,
            &quot;miDebuggerPath&quot;:&quot;/usr/bin/aarch64-linux-gnu-gdb&quot;,
            &quot;miDebuggerServerAddress&quot;: &quot;192.168.19.171:10000&quot;,
            &quot;preLaunchTask&quot;:&quot;shell&quot;,
            &quot;setupCommands&quot;: [
                {
                    &quot;description&quot;: &quot;Enable pretty-printing for gdb&quot;,
                    &quot;text&quot;: &quot;-enable-pretty-printing&quot;,
                    &quot;ignoreFailures&quot;: true
                }
            ]
        }
    ]
}
</code></pre>

<h2 id="3">3. 编译&amp;调试</h2>
<h3 id="3-1">3. 1 调试前的准备</h3>
<p>为了使开发主机上的生成的可执行文件可以复制到目标开发板上，可以通过网络的形式进行传输，毕竟GDB也是基于网络的，这样就更方便些，例如本文所用的方式NFS：已知在开发主机上已经有NFS服务器了，目录为 <code>/home/dl/share/nfs</code>，IP地址为：192.168.19.188  。那么只需要在开发板上挂载NFS服务器即可，用如下命令：</p>
<pre><code>mount -t nfs -o nolock 192.168.19.188:/home/dl/share/nfs    /mnt
</code></pre>

<blockquote>
<p>将PC的NFS目录挂载到开发板的mnt目录 。</p>
</blockquote>
<p>因此，需要每次将生成的目标文件复制到nfs目录下，有很多种方式，可以手动用命令进行，因此VS Code中已经集成了终端，可以直接用，又或者修改makefile，添加make install 之类的命令，也是可以的，方法有很多，举个简陋的例子（makefile）：</p>
<pre><code>install:
    cp -raf test /home/dl/share/nfs
</code></pre>

<p>然后，修改<code>tasks.josn</code>，让它执行<code>make</code> 之后再执行<code>make install</code>：</p>
<pre><code>.............
 &quot;tasks&quot;: [
        {
            &quot;label&quot;: &quot;shell&quot;,
            &quot;type&quot;: &quot;shell&quot;,
            &quot;command&quot;: &quot;make;make install&quot;,
.............
</code></pre>

<h3 id="32">3.2 开始调试</h3>
<ul>
<li>VS Code还有一个好处就是集成了linux sh终端，使用VS Code终端界面，在里面连开发板的SSH，就不再需要在调试的过程中不断的进行界面切换了，按上文所提开发板的IP为：192.168.19.171,因此，在VS Code中用SSH相连即可：
<img alt="" src="../images/QQ截图20181206142036.jpg" /></li>
<li>
<p>按前面的步骤，已经可以实现在开发板的/mnt目录下面实现数据程序的共享了，在开发板的/mnt目录下面输入命令：<code>gdbserver :10000 test</code> 即可实现在开发板监听<code>10000</code>端口的GDB调试事件了。</p>
</li>
<li>
<p>在VS Code下面按下快捷键：<code>Ctrl+Shift+B</code> 即可实现调用makefile对整个工程进行make 并且make install ，效果如下：
<img alt="" src="../images/QQ图片20181206140901.png" /></p>
</li>
</ul>
<h2 id="4">4. 演示效果</h2>
<p><img alt="" src="../images/QQ截图20181206143712.jpg" /></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>